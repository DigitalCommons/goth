#!/usr/bin/env ruby
$:.unshift File.join(File.dirname(__FILE__), "..", "lib")
require 'rubygems'
require 'getoptlong'
require 'goth'
require 'erb'

options = GetoptLong.new(
  [ '--language', '-l', GetoptLong::REQUIRED_ARGUMENT ],
  [ '--template', '-t', GetoptLong::REQUIRED_ARGUMENT ],
)

template = "esstemplate.erb"
language = "en"

options.each do |opt, arg|
  case opt
   when '--language'
     language = arg
   when '--template'
     template = arg
  end
end

schema = GOTH::Schema.create_from_file(ARGV, language)
generator = GOTH::Generator.new( schema, template )

file = generator.run()

puts file #output the result to terminal

#TODO: generator.schema.remove_assests()